---
title: 【Linux】Linux常用命令总结
tags:
  - 运维
  - Linux
excerpt: Linux文件系统；Vim；网络配置；系统管理；帮助命令；文件目录相关命令；日期时间相关命令；用户管理相关命令；文件权限相关命令；搜索查找相关命令；磁盘管理相关命令；进程管理相关命令；定时任务；包管理。
typora-root-url: ..
abbrlink: e511c25d
date: 2022-04-12 14:46:51
index_img: ../images/封面图/linux.jpg
---

# 1 Linux 文件系统

## 1.1 Linux 文件

Linux 系统中一切皆文件。

## 1.2 Linux 目录结构

Linux 的目录是一颗树。逻辑上是以 `/`  为根的树，物理上通过**挂载点**实现不同的目录写入不同的硬盘或者分区。

> 进入某个目录：`cd 目录名`

* `/bin`：二进制文件，通常是一些命令。（链接，指向了`/usr/bin`）
* `/sbin`：超级管理员命令。（链接，指向了`/usr/sbin`）
* `/usr`：用户相关
* `/dev`：设备相关
* `/lib`：库文件。（链接，指向了`/usr/lib`）
* `/lib64`：库文件。（链接，指向了`/usr/lib64`）
* `/etc`：配置相关
* `/home`：普通用户的文件夹
* `/root`：超级管理员用户的主文件夹
* `/opt`：第三方软件默认存放的位置
* `/media`：可移动媒体设备（U盘、光驱）的挂载点
* `/mnt`：可移动媒体设备的另一个挂载点
* `/proc`：系统进程相关
* `/run`：当前系统运行信息，重启后清空
* `/srv`：服务相关
* `/sys`：系统硬件相关信息
* `/tmp`：存放临时文件
* `/var`：存放经常修改的文件，比如日志
* `/boot`：引导分区

# 2 Vim 编辑器

## 2.1 Vi / Vim 是什么

1. Vi 是 Unix 操作系统中最通用的文本编辑器
2. Vim 是从 Vi 发展出来的更强大的文本编辑器，完全兼容 Vi 

## 2.2 三种模式

1. 一般模式：

   即在终端输入 `vim 文件名` 后进入的模式。

   主要操作是删除、复制和粘贴。

2. 编辑模式：

   一般模式下输入 `i`、`a` 或 `o`进入编辑模式。

   编辑模式下按下 `ESC` 退出编辑模式，进入一般模式。

   主要操作是编辑文本。

3. 命令模式：

   一般模式下输入 `:` 或者 `/` 进入命令模式。

   > 常用命令：`:wq` `:q` `:q!`

## 2.3 一般模式

1. `yy	`：复制当前行。`5yy`：复制包括当前行在内的5行。
2. `y$`：复制光标位置到当前行结束的内容。`y^`：复制当前行开始到光标前一个位置的内容。
3. `yw`：复制当前词
4. `p`：粘贴
5. `dd`：删除当前行。`3dd`：删除包括当前行在内的3行。
6. `d$`：删除光标位置到当前行结束的内容。`d^`：删除当前行开始到光标前一个位置的内容。
7. `dw`：删除当前词
8. `u`：撤销

9. `x`：剪切
10. `r`：替换当前字符。`R` ：替换模式。
11. `^`：移动到行头
12. `$`：移动到行尾
13. `w`：移动到下一个词的词头
14. `e`：移动到当前词尾
15. `b`：移动到当前词的词头
16. `gg` 或 `H`：移动到文档开头
17. `G` 或 `L`：移动到文档最后一行开头。`3G`：移动到第3行行头

## 2.4 编辑模式

1. 进入编辑模式
   * `i`：当前光标前插入。`I`：当前行的最前插入。
   * `a`：当前光标后插入。`A`：当前行的最后插入。
   * `o`：当前行的下一行。`O`：当前行的上一行。

2. 退出编辑模式

   按下 `ESC`

## 2.5 命令模式

1. 输出 `:` 进入命令模式
   * `w`：保存
   * `q`：退出
   * `wq`：保存并退出
   * `q!`：丢弃更改并强制退出
   * `set nu`：显示行号。`set nonu`：隐藏行号。

2. 输入 `:/keyword`  按下回车，可以进行关键词查找。按 `n` 跳转到下一个关键词位置。按 `N` 跳转到上一个关键词位置。

3. 输入 `:s/oldWord/newWord` 按下回车，可以将当前行第一个 `oldWord` 替换成 `newWord`。输入`:s/oldWord/newWord/g` 按下回车，可以将当前行所有 `oldWord` 替换成 `newWord`。输入`:%s/oldWord/newWord` 按下回车，可以将所有行第一个 `oldWord` 替换成 `newWord`。输入 `:%s/oldWord/newWord/g` 按下回车，可以将所有行`oldWord` 替换成 `newWord`。

# 3 网络配置和系统管理

1. 查看网络配置  

   ```
   ifconfig
   ```

2. 修改网络配置

   ```
   cd /etc/sysconfig/network-scripts/
   vim ifcfg-网络设备名
   ```


3. 查看主机名

   ```
   hostname
   ```

4. 修改主机名

   ```
   vim /etc/hostname
   ```

   或

   ```
   hostnamectl set-hostname 新的主机名
   ```

   重启服务器即可

5. 修改 hosts 文件

   ```
   vim /etc/hosts
   ```

# 4 Linux 系统管理

## 4.1 进程和服务

* 进程（process）：一个正在执行的程序或者命令
* 服务（service）：启动后一直存在，常驻内存

## 4.2 systemctl 命令

1. 基本语法

   ```shell
   systemctl start|stop|restart|enable|status 服务名
   ```

   分别表示启动、停止、重启、设置开机启动、查看当前状态

2. 查看服务

   ```shell
   ls /usr/lib/systemd/system
   ```

## 4.3 系统运行级别

### 4.3.1 Centos 7 中的运行级别

* `muti-user.target`：等价于运行级别3（多用户有网无GUI）
* `graphical.target`：等价于运行级别5（多用户有网有GUI）

### 4.3.2 查看运行级别

```
systemctl get-default
```

### 4.3.3 查看服务是否开机自启动

```
systemctl list-unit-files
```

>**实战**：开启/关闭防火墙 
>
>1. 查看防火墙服务状态
>
>   ```
>   systemctl status firewalld
>   ```
>
>2. 关闭防火墙
>
>   ```
>   systemctl stop firewalld
>   ```
>
>3. 开启防火墙
>
>   ```
>   systemctl start firewalld
>   ```

## 4.4 关机和重启

### 4.4.1 常见操作

* `sync`：将数据同步到硬盘中
* `halt`：停机。关闭系统，但不断电
* `poweroff`：关机，断电
* `reboot`：立即重启。相当于`shutdown -r now`。

### 4.4.2 关机

* 关机（默认一分钟后关机）

  ```
  shutdown 
  ```

* 取消关机（未关机时操作）

  ```
  shutdown -c
  ```

* 立刻关机

  ```
  shutdown now
  ```

* 指定3分钟后关机

  ```
  shutdown 3
  ```

* 指定时间关机

  ```
  shutdown 12:00
  ```

# 5 常用基本命令

## 5.1 帮助

### 5.1.1 man 获取帮助信息

* 用法

  ```
  man 命令或配置文件
  ```

* 举例

  ```
  man ls
  ```

### 5.1.2 help 获取 shell 内置命令的帮助信息

* 用法

  ```
  help 内置命令
  ```

* 举例

  ```
  help cd
  ```

### 5.1.3 --help 获取外部命令的帮助信息

*  用法

  ```
  外部命令 --help
  ```

* 举例

  ```
  ls --help
  ```

### 5.1.4 type 查看命令是内置命令还是外部命令

* 用法

  ```
  type 命令
  ```

* 举例

  ```
  type ls
  ls 是 `ls --color=auto' 的别名
  ```

  ```
  type cd
  cd 是 shell 内嵌
  ```


## 5.2 文件目录相关

### 5.2.1 pwd 显示当前工作的绝对路径

* 用法

  ```
  pwd
  ```

* 举例

  ```
  [root@localhost sysconfig]#pwd
  /etc/sysconfig
  ```

> **绝对路径**：以 `/` 开头的路径。表示从根目录一直找到文件或文件夹
>
> **相对路径**：不以`/`开头的路径。表示从当前位置或上一级开始查找

### 5.2.2 ls 列目录内容

* 用法

  ```
  ls [选项] [文件名]
  ```

  | 选项      | 描述                                                  |
  | --------- | ----------------------------------------------------- |
  | -a, --all | 列出目录中所有文件，包括以“.”开头的文件。             |
  | -l        | 等同于 `ll`，长数据串列出，包含文件属性和权限等数据。 |


### 5.2.3 mkdir 建立目录

* 用法

  ```
  mkdir [选项] 目录
  ```

  | 选项           | 描述                               |
  | -------------- | ---------------------------------- |
  | -p,  --parents | 为所给出的目录建立丢失了的父目录。 |

  >例如：已存在目录/a，当用到命令'mkdir /a' 时报错，而'mkdir -p /a'则不会。

* 举例

  ```
  mkdir test
  ```

  ```
  mkdir -p /a/b/c
  ```

  

### 5.2.4 rmdir 删除目录

* 用法

  ```
  rmdir [选项] 目录
  ```

  | 选项           | 描述                                                         |
  | -------------- | ------------------------------------------------------------ |
  | -p,  --parents | 如果目录由多个路径名组成，从最后一个路径名开始依次删除，  直到所有的路径名都被删完。 |

* 举例

  ```
  rmdir test
  ```

  ```
  rmdir -p /a/b/c
  ```

  

### 5.2.5 touch 创建空文件

* 用法

  ```
  touch 文件
  ```

* 举例

  ```
  touch test.txt
  ```

### 5.2.6 cp 复制文件或目录

* 用法

  ```
  cp [选项] 文件路径
  cp [选项] 文件...目录
  ```

  >cp 复制文件(或者目录等).  
  >
  >可以使用这个命令复制一个文件到一个指定的目的地, 或者复制任意多个文件到一个目的目录.  
  >
  >如果最后一个命令参数为一个已经存在的目录名,cp 会将每一个源文件复制到那个目录下(维持原文件名).
  >
  >如果所给的参数只有两个文件名.它把前一个文件复制到后一个文件上.  (覆盖)
  >
  >如果最后一个参数不是文件名,目录名,和给出多于两个非选项参数,是 错误的.

* 举例

  ```
  cp test.txt /home
  ```

### 5.2.7 rm 删除文件或目录

* 用法

  ```
  rm [选项] 文件
  ```

  | 选项   | 描述                             |
  | ------ | -------------------------------- |
  | -r, -R | 递归地移除目录树。               |
  | -f     | 不作确认提示。不会写出诊断信息。 |
  
  > 删除当前文件夹下的全部文件
  >
  > `rm -rf ./*`

### 5.2.8 mv 移动文件

* 用法

  ```
  mv [选项] 源文件 目标文件
  mv [选项] 源文件 目录
  ```

  | 选项 | 描述           |
  | ---- | -------------- |
  | -f   | 覆盖前不提示   |
  | -v   | 说明完成了什么 |

### 5.2.9 cat 查看文件内容

* 用法

  ```
  cat [选项] 文件
  ```

  | 选项 | 描述     |
  | ---- | -------- |
  | -n   | 显示行号 |

### 5.2.10 more 文件分屏查看器

* 用法

  ```
  more 文件
  ```

### 5.2.11 less 文件分屏查看器

* 用法

  ```
  less 文件
  ```

  >用法和`more`类似，但是 `less` 查看文件时不会一次性将文件加入内存，加载更快。

### 5.2.12 echo 控制它输出

* 用法

  ```
  echo 文本					(控制台输出文本)
  ```

  ```
  echo $                   (控制台输出环境变量)
  ```

* 举例

  ```
  echo hello linux
  hello linux
  ```

### 5.2.13 >输出重定向  >>追加

1. 将列表内容写入到文件中

   ```
   ls -l > 文件 
   ```

   例：`ls -l out.txt`

2. 将列表内容追加到文件中

   ```
   ls -l >> 文件
   ```

   例：`ls -l >> out.txt`

3. 将文件1的内容覆盖到文件2

   ```
   cat 文件1 > 文件2
   ```

   例：`cat demo1.txt > demo2.txt`

4. 将一段文本追加到文件末尾

   ```
   echo "文本" >> demo1.txt
   ```

### 5.2.14 head 显示文件头部内容

* 用法

  ```
  head [选项] 文件
  ```

  | 选项 | 描述                                         |
  | ---- | -------------------------------------------- |
  | -n   | 指定显示文件开头的行数。（缺省默认显示10行） |

* 举例：显示 demo 文件的前5行

  ```
  head -n 5 demo
  ```

### 5.2.15 tail 显示文件尾部内容

* 用法

  ```
  tail [选项] 文件
  ```

  | 选项 | 描述                                         |
  | ---- | -------------------------------------------- |
  | -n   | 指定显示文件末尾的行数。（缺省默认显示10行） |
  | -f   | 实时监控更新。（`ctrl + c` 停止监控）        |

* 举例：显示 demo 文件的末5行

  ```
  tail -n 5 demo
  ```

### 5.2.16 ln 软链接

> 软连接可以指向不同文件系统里的文件（比如由NFS装载的不同机器文件系统上的文件），甚至可以指向一个不一定确实存在的文件。在软连接文件被访问（系统调用）的时候，操作系统用该文件所包含的路径替换该文件的访问介入点，从而实现对所指文件的访问。

1. 给原文件或目录创建一个软连接（相当于快捷方式）

   ```
   ln -s [源文件或目录] [软连接名]
   ```

2. 删除软连接

   ```
   rm 软连接名   （只删除软连接，对应文件或目录不会被删除）
   ```

   ```
   rm -rf 软连接名/  （不仅删除软连接，对应真实目录下的文件也会被删除）
   ```

>一个硬连接仅仅是一个文件名。（一个文件可以有好几个文件名，只有将最后一个文件名从磁盘上删除，才能把这个文件删掉。文件名的个数是由ls(1)来确定的。所有的文件名都处于同一个状态，也就没有什么“源名字” 之说。通常文件系统里的一个文件的所有名字包含着一样的数据信息，不过这样也不是必需的。）

### 5.2.17 history 查看执行过的历史指令

```
history
history 10
!命令编号
history -c 清空历史
```

## 5.3 日期时间相关

### 5.3.1 date 打印系统日期和时间

* 用法

  1. 打印当前日期和时间

     ```
     date
     ```

  2. 打印当前年份

     ```
     date +%Y
     ```

  3. 打印当前月份

     ```
     date +%m
     ```

  4. 打印当前日期

     ```
     date +%d
     ```

  5. 打印指定格式的日期和时间

     ```
     date +%Y-%m-%d_%H:%M:%S
     ```

### 5.3.2 cal 查看日历

* 用法

  1. 查看当前月的日历

     ```
     cal
     ```

  2. 查看上个月、当月、下个月的日历

     ```
     cal -3
     ```

  3. 查看当年日历

     ```
     cal -y
     ```

## 5.4 用户管理相关

### 5.4.1 useradd 添加用户

1. 添加一个用户

   ```
   useradd 用户名
   ```

2. 添加一个用户到某个组

   ```
   useradd 组名 用户名
   ```

3. 添加用户并指定主目录名

   ```
   useradd -d /home/目录名 用户名
   ```

4. 添加用户并指定到存在的用户组

   ```
   useradd -g 用户组 用户
   ```


### 5.4.2 passwd 修改用户密码

```
passwd 用户名
```

### 5.4.3 id 查看用户 UID GID

1. 查看当前用户的 UID GID

   ```
   id
   ```

2. 查看指定用户的 UID GID （也可以用来判断有没有这个用户）

   ```
   id 用户名
   ```

### 5.4.4 su 切换用户（switch user）

```
su root
```

> root 用户切换到普通用户无密码
>
> 普通用户切换到普通用户需要密码
>
> 普通用户切换到 root 用户需要密码

> 切换用户相当于在当前会话内部嵌套了一层会话，使用 `exit` 退出当前会话，回到上一层会话。

### 5.4.5 who am i 和 whoami 查看当前登录用户身份

1. 查看当前用户信息（创建最外层会话的用户）

   ```
   who
   ```

   相当于

   ```
   who am i
   ```

   > 如果 root 用户切换到 test 用户，此时输入 `who` 或 `who am i`   显示 `root`

2. 查看当前用户信息（当前目前会话的用户）

   ```
   whoami
   ```

   > 如果 root 用户切换到 test 用户，此时输入 `whoami` 显示 ` test`

### 5.4.6 sudo 允许用户以超级用户执行命令

> 只有在 `/etc/sudoers` 文件中被允许的用户才可以使用 `sudo` 提升权限

### 5.4.7 userdel 删除用户

```
userdel test
```

注意：删除用户后，用户在 `/home` 下的文件夹还在。

### 5.4.8 usermod 修改用户信息

1. 添加用户到组

   ```
   usermod -g 组名 用户名
   ```

### 5.4.9 groupadd 添加组

```
groupadd 组名
```

### 5.4.10 groupmod 修改组

1. 修改组名

   ```
   groupmod -n 新组名	组名
   ```

### 5.4.11 groupdel 删除组

```
groupdel 组名
```

## 5.5 文件权限相关

### 5.5.1 文件属性

Linux 系统是一种典型的多用户系统，不同的用户处于不同的地位，拥有不同的权限。

为了保护系统的安全性，Linux 系统对不同的用户访问同一文件（包括目录文件）的权限做了不同的规定。

在 Linux 中我们通常使用以下两个命令来修改文件或目录的所属用户与权限：

* chown (change ownerp) ： 修改所属用户与组。

* chmod (change mode) ： 修改用户的权限。

在 Linux 中我们可以使用 `ll` 或者 `ls –l` 命令来显示一个文件的属性以及文件所属的用户和组。

例子：

```
[root@localhost ~]# ll
总用量 36
-rw-------. 1 root root  1688 4月   1 18:08 anaconda-ks.cfg
-rw-r--r--. 1 root root  1736 4月   1 18:11 initial-setup-ks.cfg
-rw-r--r--. 1 root root 27051 3月  29 15:05 install.sh
```

每个部分代表的意义：

![img](./images/Linux笔记/file-llls22.jpg)



### 5.5.2 文件权限

![363003_1227493859FdXT](./images/Linux笔记/363003_1227493859FdXT.png)

从左至右用 **0-9** 这些数字来表示。

第 **0** 位确定文件类型。

* `d`：目录文件
* `l`：链接
* `c`：字符类型的设备文件。如：鼠标、键盘
* `b`：块类型的设备文件。如：硬盘
* `-`：文件

第 **1-3** 位确定**属主**（该文件的所有者）拥有该文件的权限。

第**4-6**位确定**属组**（所有者的同组用户）拥有该文件的权限。

第**7-9**位确定**其他用户**拥有该文件的权限。

其中，第 **1、4、7** 位表示读权限，如果用 **r** 字符表示，则有读权限，如果用 **-** 字符表示，则没有读权限；

第 **2、5、8** 位表示写权限，如果用 **w** 字符表示，则有写权限，如果用 **-** 字符表示没有写权限；第 **3、6、9** 位表示可执行权限，如果用 **x** 字符表示，则有执行权限，如果用 **-** 字符表示，则没有执行权限。

### 5.5.3 chmod 更改文件权限

1. 第一种

   * 用法

     ```
     chmod  (u g o a)   (+ - =)   (r w x)   文件或目录
     ```

     > `u`：所有者		`g`：所有组		`o`：其它用户		`a`：所有人    (缺省为所有人)
     >
     > `+`：添加权限	`-`：删除权限	`=`：修改为
     >
     > `r`：读					`w`：写					`x`：执行

     <img src="./images/Linux笔记/image-20220416170207287.png" alt="image-20220416170207287" style="zoom:50%;" />

   * 举例：

     ```
     [root@localhost demo]# ll
     总用量 0
     -rw-r--r-- 1 root root 0 4月  16 17:07 test
     [root@localhost demo]# chmod u+x test
     [root@localhost demo]# ll
     总用量 0
     -rwxr--r-- 1 root root 0 4月  16 17:07 test
     ```

2. 第二种

   * 用法

     ```
     chmod [mode=421] 文件
     ```

     >r = 4 	w = 2 	x = 1,		rwx = 7		r-- = 4

   * 举例

     ```
     [root@localhost demo]# ll
     总用量 0
     -rwxr--r-- 1 root root 0 4月  16 17:07 test
     [root@localhost demo]# chmod 777 test
     [root@localhost demo]# ll
     总用量 0
     -rwxrwxrwx 1 root root 0 4月  16 17:07 test
     ```

>`chmod -R 777 demo/`：将 `demo/` 目录下的所有目录以及文件都修改权限

### 5.5.4 chown 更改文件所有者

* 用法：

  ```
  chown [选项] 用户 文件
  ```

  | 选项 | 描述     |
  | ---- | -------- |
  | -R   | 递归更改 |

  

### 5.5.5 chgrp 更改文件所属组

* 用法：

  ```
  chgrp [选项] 用户组 文件
  ```

  | 选项 | 描述     |
  | ---- | -------- |
  | -R   | 递归更改 |

## 5.6 搜索查找相关

### 5.6.1 find 查找文件或目录

* 用法

  ```
  find [搜索范围] [选项]
  ```

  | 选项            | 描述                               |
  | --------------- | ---------------------------------- |
  | -name<查询方式> | 按照指定的文件名查找模式来查找文件 |
  | -user<用户名>   | 查找指定用户的所有文件             |
  | -size<文件大小> | 按照指定文件大小查找文件           |

* 举例

  1. 查找 `/home`文件夹下的 `info`文件

     ```
     find /home -name info
     ```

  2. 查找`/home`文件夹下的`.txt`后缀名的文件

     ```
     find /home -name "*.txt"
     ```

  3. 查找 `/home` 文件夹下`test`用户的所有文件

     ```
     find /home -user test
     ```

  4. 查找 `/home`文件夹下**大于10M**的文件

     ```
     find /home -size +10M
     ```

     

### 5.6.2 locate 快速定位文件路径

> `locate`命令利用了事先建立好的 locate 数据库，无需遍历文件系统，查询速度较快。
>
> 为保证结果准确度，管理员需要定期更新 lacate。

* 用法

  1. 更新 locate 数据库

     ```
     updatedb
     ```

  2. 查找文件

     ```
     locate 文件
     ```

### 5.6.3 which 或 whereis 定位命令

* 用法

  ```
  which 命令
  ```

* 举例

  ```
  which ls
  ```

### 5.6.4 grep 过滤查找 及 | 管道符

> `|`，管道符。表示将前一个命令的处理结果输出传递给后面的命令处理

* 用法

  ```
  grep [选项] 查找内容 源文件
  ```

  | 选项 | 描述             |
  | ---- | ---------------- |
  | -n   | 显示匹配行和行号 |

* 举例

  1. 查找 test 文件在第几行

     ```
     ls | grep -n test
     ```

  2. 查找 demo 在 test 文件的第几行

     ```
     grep -n demo test
     ```

### 5.6.5 wc 统计文件行数、词数、字节数（word count）

* 用法

  ```
  wc 文件
  ```

* 举例

  ```
  wc case.sh
  12 20 96 case.sh
  ```
  
  即：12行 20词 96字节 文件名 case.sh

## 5.7 压缩解压相关

### 5.7.1 gzip / gunzip

* 用法

  ```
  gzip 文件
  gunzip 压缩文件(.gz结尾)
  ```

* 注意
  1. 只能压缩文件，不能压缩目录
  2. 不保留源文件
  3. 同时压缩多个文件，会产生多个压缩包

### 5.7.2 zip / unzip 

* 用法

  ```
  zip [选项] 压缩后的文件名  文件或目录
  unzip [选项] 文件或目录(.zip结尾)
  ```

  | 选项 | 描述         |
  | ---- | ------------ |
  | -r   | 递归压缩目录 |
  | -d   | 指定位置     |

* 注意
  1. 可以压缩目录
  2. 保留源文件

### 5.7.3 tar 打包、解包

* 用法

  ```
  tar [选项] 名称 内容
  ```

  | 选项 | 描述                       |
  | ---- | -------------------------- |
  | -c   | 产生`.tar`打包文件         |
  | -v   | 显示详细信息               |
  | -f   | 指定压缩后的文件名         |
  | -z   | 使用 gzip 进行压缩或者解压 |
  | -x   | 解压`.tar`文件             |
  | -C   | 解压到指定目录             |
  
* 举例

  1. 打包并压缩`demo1`和`demo2`两个文件夹，并将打包后的文件命名为`tmp.tar.gz`

     ```
     tar -zcvf tmp.tar.gz demo1/ demo2/
     ```

  2. 解压`tmp.tar.gz`文件，并将解压出来的文件存放到`test`文件夹中

     ```
     tar -zxvf tmp.tar.gz -C test/
     ```

## 5.8 磁盘管理相关

### 5.8.1 tree 查看目录结构

1. 安装 tree 工具

   ```
   yum install tree
   ```

2. 查看当前目录结构

   ```
   tree
   ```

### 5.8.2 du 统计文件或目录大小（disk usage）

```
du 目录或文件
```

| 选项            | 描述                         |
| --------------- | ---------------------------- |
| -h              | 显示 G M K 等单位            |
| -a              | 不仅查看子目录，而且查看文件 |
| -c              | 显示目录和文件大小以及总和   |
| -s              | 只显示总和                   |
| --max-depth = n | 限制深度为n                  |

### 5.8.3 df 查看磁盘使用情况（disk free）

```
df
```

| 选项 | 描述              |
| ---- | ----------------- |
| -h   | 显示 G M K 等单位 |

### 5.8.4 free 查看内存使用情况

```
free
```

| 选项 | 描述              |
| ---- | ----------------- |
| -h   | 显示 G M K 等单位 |

### 5.8.5 lsblk 查看设备挂载情况（list block）

```
lsblk
```

### 5.8.6 mount 挂载 / umount 卸载

1. 挂载

   ```
   mount 设备 目录
   ```

2. 卸载

   ```
   umount 设备文件名或挂载点
   ```

3. 开机自动挂载

   ```
   vim /etc/fstab
   ```

### 5.8.7 fdisk 分区

1. 查看分区详情

   ```
   fdisk -l
   ```

2. 对新磁盘进行分区操作

   ```
   fdisk 硬盘设备名
   ```

### 5.8.8 mkfs 指定文件系统

```
mkfs -t 文件系统 设备
```



## 5.9 进程管理相关

### 5.9.1 ps 查看当前系统进程状态（process status）

1. 查看系统中所有的进程

   ```
   ps aux
   ```

2. 查看子父进程之间的关系

   ```
   ps -ef
   ```

   

| 选项 | 描述                                       |
| ---- | ------------------------------------------ |
| a    | 列出带有终端的所有用户的进程               |
| x    | 列出当前用户的所有进程，包括没有终端的进程 |
| u    | 面向用户友好                               |
| -e   | 列出所有进程                               |
| -u   | 列出某个用户相关的所有进程                 |
| -f   | 显示完整格式                               |

### 5.9.2 kill 终止进程

通过 pid 终止某进程

```
kill pid
```

| 选项 | 描述             |
| ---- | ---------------- |
| -9   | 强迫进程立即停止 |

### 5.9.3 pstree 查看进程树

```
yum install pstree
pstree
```

| 选项 | 描述             |
| ---- | ---------------- |
| -p   | 显示进程的 pid   |
| -u   | 显示进程所属用户 |

### 5.9.4 top 实时监控系统进程状态

```
top
```

| 选项    | 描述                          |
| ------- | ----------------------------- |
| -d 秒数 | 每隔几秒刷新，默认3秒         |
| -i      | 不显示闲置或者僵死进程        |
| -p      | 指定 pid 来监控某个进程的状态 |

### 5.9.5 netstat 显示网络状态和端口占用信息

```
netstat [选项]
```

| 选项 | 描述                                             |
| ---- | ------------------------------------------------ |
| -a   | 显示所有正在或不在监听的套接字                   |
| -n   | 显示数字形式的地址而不是去解析主机、端口或用户名 |
| -l   | 只显示在监听的服务状态                           |
| -p   | 显示哪个进程在调用                               |

举例：

1. 查看该进程网络信息

   ```
   netstat -anp | grep 进程号
   ```

2. 查看网络端口号占用情况

   ```
   netstat -nlp | grep 端口号
   ```

   

## 5.10 crontab 系统定时服务管理 任务

```
crontab [选项]
```

| 选项 | 描述                            |
| ---- | ------------------------------- |
| -e   | 编辑 crontab 定时任务           |
| -l   | 查询 crontab 任务               |
| -r   | 删除当前用户所有的 crontab 任务 |

时间格式如下：（https://www.runoob.com/linux/linux-comm-crontab.html）

```
f1 f2 f3 f4 f5 program
```

- 其中 f1 是表示分钟，f2 表示小时，f3 表示一个月份中的第几日，f4 表示月份，f5 表示一个星期中的第几天。program 表示要执行的程序。
- 当 f1 为 * 时表示每分钟都要执行 program，f2 为 * 时表示每小时都要执行程序，其馀类推
- 当 f1 为 a-b 时表示从第 a 分钟到第 b 分钟这段时间内要执行，f2 为 a-b 时表示从第 a 到第 b 小时都要执行，其馀类推
- 当 f1 为 */n 时表示每 n 分钟个时间间隔执行一次，f2 为 */n 表示每 n 小时个时间间隔执行一次，其馀类推
- 当 f1 为 a, b, c,... 时表示第 a, b, c,... 分钟要执行，f2 为 a, b, c,... 时表示第 a, b, c...个小时要执行，其馀类推

```
*    *    *    *    *
-    -    -    -    -
|    |    |    |    |
|    |    |    |    +----- 星期中星期几 (0 - 6) (星期天 为0)
|    |    |    +---------- 月份 (1 - 12) 
|    |    +--------------- 一个月中的第几天 (1 - 31)
|    +-------------------- 小时 (0 - 23)
+------------------------- 分钟 (0 - 59)
```

使用者也可以将所有的设定先存放在文件中，用 crontab file 的方式来设定执行时间。

举例：

每一分钟执行一次 /bin/ls：

```
* * * * * /bin/ls
```

在 12 月内, 每天的早上 6 点到 12 点，每隔 3 个小时 0 分钟执行一次 /usr/bin/backup：

```
0 6-12/3 * 12 * /usr/bin/backup
```

周一到周五每天下午 5:00 寄一封信给 alex@domain.name：

```
0 17 * * 1-5 mail -s "hi" alex@domain.name < /tmp/maildata
```

每月每天的午夜 0 点 20 分, 2 点 20 分, 4 点 20 分....执行 echo "haha"：

```
20 0-23/2 * * * echo "haha"
```

下面再看看几个具体的例子：

```
0 */2 * * * /sbin/service httpd restart  意思是每两个小时重启一次apache 

50 7 * * * /sbin/service sshd start  意思是每天7：50开启ssh服务 

50 22 * * * /sbin/service sshd stop  意思是每天22：50关闭ssh服务 

0 0 1,15 * * fsck /home  每月1号和15号检查/home 磁盘 

1 * * * * /home/bruce/backup  每小时的第一分执行 /home/bruce/backup这个文件 

00 03 * * 1-5 find /home "*.xxx" -mtime +4 -exec rm {} \;  每周一至周五3点钟，在目录/home中，查找文件名为*.xxx的文件，并删除4天前的文件。

30 6 */10 * * ls  意思是每月的1、11、21、31日是的6：30执行一次ls命令
```

# 6 软件包管理

## 6.1 rpm

### 6.1.1 rpm 查询命令（rpm -qa）

* 用法：

  1. 查询所安装的所有 rpm 软件包

     ```
     rpm -qa
     ```

  2. 查询某个包的详情信息

     ```
     rpm -qi 包
     ```

* 举例

  1. 查询所有包信息

     ```
     rpm -qa
     ```

  2. 查询 firefox 包的详细信息

     ```
     rpm -qi firefox
     ```

     

### 6.1.2 rpm 卸载命令（rpm -e）

```
rpm -e 包
```

### 6.1.3 rpm 安装命令（rpm -i）

```
rpm -i 包
```

| 选项 | 描述         |
| ---- | ------------ |
| -i   | 安装         |
| -v   | 显示详细信息 |
| -h   | 显示进度条   |

## 6.2 yum 

```
yum [选项] [参数]
```

| 选项 | 描述                  |
| ---- | --------------------- |
| -y   | 对所有的提问都回答yes |

| 参数         | 描述                              |
| ------------ | --------------------------------- |
| install      | 安装 rpm 软件包                   |
| update       | 更新 rpm 软件包                   |
| check-update | 检查是否有可用可更新的 rpm 软件包 |
| remove       | 删除指定的 rpm 软件包             |
| list         | 显示软件包信息                    |
| clean        | 清理缓存                          |
| deplist      | 显示 yum 软件包的依赖关系         |

举例：

```
yum -y install firefox
```
